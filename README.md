# golang-personal-finances

[![Actions Status](https://github.com/rubengomes8/golang-personal-finances/workflows/build/badge.svg)](https://github.com/rubengomes8/golang-personal-finances/actions)
[![codecov](https://codecov.io/gh/rubengomes8/golang-personal-finances/branch/main/graph/badge.svg)](https://codecov.io/gh/rubengomes8/golang-personal-finances)

## Objective
This repo builds a service whose goal is to manage personal finances. It creates:
- a database
- a HTTP Server to manage expenses/incomes and its metadata (categories, cards)
- a gRPC Server to manage expenses/incomes and its metadata (categories, cards)

Here is a simple diagram that describes the project:
![Project Diagram](resources/images/golang-personal-finances-backend-diagram.png)

## Technologies used
- Protobuf 3
- gRPC
- Golang (using gin http framework)
- Postgres
- Docker

## How to run locally

### HTTP Server
1. On the project root folder run `make docker-up` - It builds the database and the gRPC / HTTP apps
2. After the environment is set up, you can test the HTTP Server using this postman collection + postman environment: [Postman Directory](resources/postman/)

### gRPC Server
1. On the project root folder run `make build-grpc` - It builds a binary and places it under the `bin/` folder
2. Run the executable: `./bin/grpc_server`
2. You can test the gRPC Server using this client: [Github gRPC Client](https://github.com/rubengomes8/golang-personal-finances-client) - or create your own

## Observability / Go templates

### User Repository

In the `internal/repository/database/user` folder there are three files: `user.go`, `with_logs_by_template.go` and `with_red_by_template.go`:
- `user.go` is the user repository database implementation
- `with_logs_by_template.go` is a decorator of the user database implementation, adding logging functionality, generated by a go template
- `with_red_by_template.go` is also a decorator of the user database implementation, adding metrics red functionality, also generated by a go template

**Note**: the same applies to all repositories

## Service Configuration Pattern
- TODO - Check here an example: https://www.youtube.com/watch?v=6zuJXIbOyhs&t=3344s




